var write=document.querySelector(".write-us"),popup=document.querySelector(".modal-login"),close=popup.querySelector(".modal-close"),surname=popup.querySelector("[type=text]"),form=popup.querySelector(".write-form"),email=popup.querySelector("[type=email]"),letterText=popup.querySelector(".text-letter"),isStorageSupport=!0,storedSurname="",storedEmail="",storedLetter="";try{storedSurname=localStorage.getItem("surname"),storedEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}write.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storedSurname||storedEmail?(surname.value=storedSurname,email.value=storedEmail,letterText.focus()):surname.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show")}),form.addEventListener("submit",function(e){surname.classList.remove("field-error"),email.classList.remove("field-error"),letterText.classList.remove("field-error"),surname.value&&email.value&&letterText.value?isStorageSupport&&(localStorage.setItem("surname",surname.value),localStorage.setItem("email",email.value)):(e.preventDefault(),surname.value||surname.classList.add("field-error"),email.value||email.classList.add("field-error"),letterText.value||letterText.classList.add("field-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&popup.classList.remove("modal-show"))});